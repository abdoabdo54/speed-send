#!/bin/bash

echo "========================================"
echo "üîç CHECKING BACKEND STATUS"
echo "========================================"
echo ""

cd /opt/speed-send || exit 1

echo "1Ô∏è‚É£ Checking Docker containers..."
docker-compose ps

echo ""
echo "2Ô∏è‚É£ Checking backend logs..."
docker-compose logs --tail=20 backend

echo ""
echo "3Ô∏è‚É£ Testing backend health..."
curl -s http://localhost:8000/health || echo "‚ùå Backend not responding"

echo ""
echo "4Ô∏è‚É£ Testing launch endpoint..."
curl -s -X POST http://localhost:8000/api/v1/campaigns/1/launch || echo "‚ùå Launch endpoint not working"

echo ""
echo "5Ô∏è‚É£ Checking if backend is accessible..."
netstat -tlnp | grep :8000 || echo "‚ùå Port 8000 not listening"

echo ""
echo "========================================"
echo "üîß DIAGNOSTIC COMPLETE"
echo "========================================"
echo ""
echo "If backend is not running, run:"
echo "  docker-compose up -d backend"
echo ""
echo "If backend has errors, run:"
echo "  docker-compose logs backend"
echo ""
